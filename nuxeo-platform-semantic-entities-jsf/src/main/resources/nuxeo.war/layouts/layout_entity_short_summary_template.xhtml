<f:subview
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:nxl="http://nuxeo.org/nxforms/layout"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxd="http://nuxeo.org/nxweb/document"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
  xmlns:a4j="http://richfaces.org/a4j"
  id="#{layout.id}">

<div class="entityDepictionContainer" style="float: left; width: 64px;">
<h:graphicImage
  url="#{nxd:fileUrl('downloadFile', value, 'entity:depiction', value.entity.depiction.filename)}?conversationId=#{conversation.id}"
  style="max-height: 60px; max-width: 60px; border: 1px solid darkGray; padding: 1px"
  rendered="#{value.hasSchema('entity') and !empty value.entity.depiction}"
  styleClass="entityDepiction" />
<h:graphicImage
  url="/icons/#{value.type}_100.png"
  style="max-height: 60px; max-width: 60px; border: 1px solid darkGray; padding: 1px"
  rendered="#{value.hasSchema('entity') and empty value.entity.depiction}"
  styleClass="entityDepiction" />
</div>
<div style="float: right">
  <a4j:commandLink immediate="true"
    reRender="relatedEntitiesPanel"
    action="#{semanticEntitiesActions.removeOccurrenceRelation(currentDocument.id, value.id)}"
    rendered="#{documentManager.hasPermission(currentDocument.ref, 'WRITE_PROPERTIES')}">
    <h:graphicImage value="/icons/action_delete_mini.gif" />
  </a4j:commandLink>
</div>
<div style="margin: 0 0 0 70px; padding: 0, 0, 0, 1em">
<p class="entityLink">
  <nxd:restDocumentLink document="#{value}">
    #{nxd:titleOrId(value)}
  </nxd:restDocumentLink>
</p>
<p class="entityShortSummary">#{semanticEntitiesActions.ellipsis(value.entity.summary, 130)}</p>
</div>
<div style="clear: both; padding: 0.5em;"></div>

</f:subview>
